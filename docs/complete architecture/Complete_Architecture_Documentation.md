# Complete Architecture Documentation
## Medical Document Chatbot - System Architecture & Integration

**Version:** 1.0  
**Date:** October 15, 2025  
**Status:** Production Architecture  

---

## Table of Contents

1. [Architecture Overview](#architecture-overview)
2. [High-Level Architecture Diagram](#high-level-architecture-diagram)
3. [Detailed Component Diagrams](#detailed-component-diagrams)
4. [Data Flow Diagrams](#data-flow-diagrams)
5. [Service Integration Map](#service-integration-map)
6. [Network Architecture](#network-architecture)
7. [Security Architecture](#security-architecture)
8. [Monitoring & Observability](#monitoring--observability)
9. [Deployment Architecture](#deployment-architecture)

---

## Architecture Overview

### Architecture Style
- **Pattern:** Microservices + Event-Driven Architecture
- **Deployment:** Cloud-Native on Microsoft Azure
- **Scale:** Auto-scaling, globally distributed
- **Security:** Defense in depth, zero trust model

### Key Characteristics
- âœ… **Highly Available:** 99.9% uptime SLA
- âœ… **Scalable:** Auto-scales from 2 to 100+ instances
- âœ… **Secure:** Multi-layer security (WAF, APIM, encryption)
- âœ… **Performant:** <2s response time with caching
- âœ… **Observable:** Real-time monitoring and alerts
- âœ… **Cost-Optimized:** Pay-per-use, auto-shutdown

---

## High-Level Architecture Diagram

### Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USER LAYER (INTERNET)                             â”‚
â”‚                                                                             â”‚
â”‚  ğŸ‘¥ Web Browser    ğŸ“± Mobile App    ğŸ’» Desktop App   ğŸŒ Progressive Web App  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â”‚ HTTPS (TLS 1.3)
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          CONTENT DELIVERY LAYER                              â”‚
â”‚                                                                              â”‚
â”‚                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                        â”‚     AZURE CDN           â”‚                           â”‚
â”‚                        â”‚  (Global Edge Network)  â”‚                           â”‚
â”‚                        â”‚  â€¢ Static Assets        â”‚                           â”‚
â”‚                        â”‚  â€¢ Image Optimization   â”‚                           â”‚
â”‚                        â”‚  â€¢ HTTPS Termination    â”‚                           â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SECURITY & LOAD BALANCING LAYER                      â”‚
â”‚                                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚    â”‚           AZURE APPLICATION GATEWAY + WAF                    â”‚         â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚         â”‚
â”‚    â”‚  â”‚  Web Application Firewall (WAF)                      â”‚    â”‚         â”‚
â”‚    â”‚  â”‚  â€¢ OWASP Top 10 Protection                           â”‚    â”‚         â”‚
â”‚    â”‚  â”‚  â€¢ DDoS Protection                                   â”‚    â”‚         â”‚
â”‚    â”‚  â”‚  â€¢ SQL Injection Prevention                          â”‚    â”‚         â”‚
â”‚    â”‚  â”‚  â€¢ XSS Protection                                    â”‚    â”‚         â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚         â”‚
â”‚    â”‚                                                              â”‚         â”‚
â”‚    â”‚  Load Balancer                                               â”‚         â”‚
â”‚    â”‚  â€¢ Round-robin distribution                                  â”‚         â”‚
â”‚    â”‚  â€¢ Health checks                                             â”‚         â”‚
â”‚    â”‚  â€¢ SSL offloading                                            â”‚         â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           API GATEWAY LAYER                                 â”‚
â”‚                                                                             â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚    â”‚              AZURE API MANAGEMENT (APIM)                       â”‚       â”‚
â”‚    â”‚                                                                â”‚       â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚    â”‚  â”‚  Rate Limiting    â”‚  â”‚  Authentication â”‚  â”‚  API Routing â”‚  â”‚       â”‚
â”‚    â”‚  â”‚  100 req/min/user â”‚  â”‚  JWT Validation â”‚  â”‚  Versioning  â”‚  â”‚       â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚    â”‚                                                                â”‚       â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚       â”‚
â”‚    â”‚  â”‚  Request Logging  â”‚  â”‚  Response Cache â”‚  â”‚  CORS Policy â”‚  â”‚       â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚       â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚             â”‚             â”‚
                    â–¼             â–¼             â–¼
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚   Azure     â”‚  â”‚   Main      â”‚  â”‚   Azure     â”‚
          â”‚   AD B2C    â”‚  â”‚   Backend   â”‚  â”‚  Functions  â”‚
          â”‚             â”‚  â”‚   API       â”‚  â”‚             â”‚
          â”‚  Auth       â”‚  â”‚  (App Svc)  â”‚  â”‚ Background  â”‚
          â”‚  Service    â”‚  â”‚             â”‚  â”‚ Processing  â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚                â”‚
                                  â”‚                â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                               BUSINESS LOGIC LAYER                           â”‚
â”‚                                  â”‚                â”‚                          â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚    â”‚          AZURE APP SERVICE (Main API)        â”‚                    â”‚     â”‚
â”‚    â”‚                             â”‚                â”‚                    â”‚     â”‚
â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚     â”‚
â”‚    â”‚  â”‚  REST API          â”‚    â”‚    â”‚  WebSocket Server        â”‚      â”‚     â”‚
â”‚    â”‚  â”‚  â€¢ /auth/*         â”‚    â”‚    â”‚  â€¢ Real-time chat        â”‚      â”‚     â”‚
â”‚    â”‚  â”‚  â€¢ /documents/*    â”‚    â”‚    â”‚  â€¢ Live updates          â”‚      â”‚     â”‚
â”‚    â”‚  â”‚  â€¢ /chat/*         â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚     â”‚
â”‚    â”‚  â”‚  â€¢ /medicines/*    â”‚    â”‚                                      â”‚     â”‚
â”‚    â”‚  â”‚  â€¢ /profile/*      â”‚    â”‚                                      â”‚     â”‚
â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                                      â”‚     â”‚
â”‚    â”‚                             â”‚                                     â”‚     â”‚
â”‚    â”‚  Runtime: Python 3.11       â”‚                                     â”‚     â”‚
â”‚    â”‚  Instances: 2-10 (auto)     â”‚                                     â”‚     â”‚
â”‚    â”‚  Always On: âœ“               â”‚                                     â”‚     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                  â”‚                                           â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚       AZURE FUNCTIONS (Serverless Background Tasks)                â”‚    â”‚
â”‚    â”‚                             â”‚                                      â”‚    â”‚
â”‚    â”‚  ğŸ“„ process-document-async â”€â”€â”¼â†’ Blob Trigger â†’ OCR Processing      â”‚    â”‚
â”‚    â”‚  â° send-notifications      â”€â”€â”¼â†’ Timer Trigger â†’ Daily Reminders   â”‚    â”‚
â”‚    â”‚  ğŸ—‘ï¸ cleanup-old-data         â”€â”€â”¼â†’ Timer Trigger â†’ Weekly Cleanup   â”‚    â”‚
â”‚    â”‚  ğŸ“Š generate-reports        â”€â”€â”¼â†’ HTTP Trigger â†’ On-demand Reports  â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚               â”‚               â”‚              â”‚
                   â–¼               â–¼               â–¼              â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Azure     â”‚  â”‚   Azure AI  â”‚  â”‚   Document  â”‚  â”‚   Azure AI  â”‚
         â”‚   OpenAI    â”‚  â”‚   Foundry   â”‚  â”‚ Intelligenceâ”‚  â”‚   Search    â”‚
         â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
         â”‚  GPT-4      â”‚  â”‚  Med42      â”‚  â”‚   OCR       â”‚  â”‚  Vector DB  â”‚
         â”‚ Orchestratorâ”‚  â”‚  BioGPT     â”‚  â”‚  Extraction â”‚  â”‚  RAG System â”‚
         â”‚             â”‚  â”‚ BiomedCLIP  â”‚  â”‚             â”‚  â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚               â”‚               â”‚              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           AI & ML PROCESSING LAYER                           â”‚
â”‚                  â”‚               â”‚               â”‚              â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    AI WORKFLOW ORCHESTRATION                           â”‚  â”‚
â”‚  â”‚                                                                        â”‚  â”‚
â”‚  â”‚  1. User Query â†’ Orchestrator (GPT-4) analyzes intent                  â”‚  â”‚
â”‚  â”‚  2. Route to appropriate agent(s):                                     â”‚  â”‚
â”‚  â”‚     â€¢ Medical Q&A â†’ Med42-Llama3 + RAG                                 â”‚  â”‚
â”‚  â”‚     â€¢ Drug Info â†’ BioGPT + Drug Database                               â”‚  â”‚
â”‚  â”‚     â€¢ Image Analysis â†’ BiomedCLIP                                      â”‚  â”‚
â”‚  â”‚     â€¢ Document OCR â†’ Document Intelligence                             â”‚  â”‚
â”‚  â”‚  3. RAG retrieval from AI Search (vector similarity)                   â”‚  â”‚
â”‚  â”‚  4. Combine results and return to user                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚               â”‚               â”‚              â”‚
                   â–¼               â–¼               â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DATA STORAGE LAYER                                â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  BLOB STORAGE   â”‚  â”‚  AZURE SQL DB    â”‚  â”‚  AZURE COSMOS DB         â”‚    â”‚
â”‚  â”‚                 â”‚  â”‚                  â”‚  â”‚                          â”‚    â”‚
â”‚  â”‚  ğŸ“ Documents   â”‚  â”‚  ğŸ‘¤ Users        â”‚  â”‚  ğŸ’¬ Chat History          â”‚    â”‚
â”‚  â”‚  ğŸ“· Images      â”‚  â”‚  ğŸ’Š Drugs        â”‚  â”‚  ğŸ“ Conversations         â”‚    â”‚
â”‚  â”‚  ğŸ“„ PDFs        â”‚  â”‚  ğŸ“‹ Prescriptionsâ”‚  â”‚  âš¡ Low Latency NoSQL      â”‚      â”‚
â”‚  â”‚                 â”‚  â”‚  ğŸ”— Relational   â”‚  â”‚  ğŸŒ Global Distribution  â”‚   â”‚
â”‚  â”‚  Hot Tier       â”‚  â”‚  S2 Standard     â”‚  â”‚  Session Consistency     â”‚   â”‚
â”‚  â”‚  LRS Replicationâ”‚  â”‚  250 GB          â”‚  â”‚  400-4000 RU/s Auto     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                    AZURE REDIS CACHE                                 â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  âš¡ In-Memory Cache                    ğŸ”„ Cache Strategy:            â”‚    â”‚
â”‚  â”‚  â€¢ Query Results (1 hour TTL)         â€¢ Drug Info: 7 days          â”‚    â”‚
â”‚  â”‚  â€¢ Drug Information (7 days TTL)      â€¢ Chat Results: 1 hour       â”‚    â”‚
â”‚  â”‚  â€¢ User Sessions (1 hour TTL)         â€¢ RAG Results: 6 hours       â”‚    â”‚
â”‚  â”‚  â€¢ RAG Search Results (6 hours TTL)   â€¢ User Sessions: 1 hour      â”‚    â”‚
â”‚  â”‚                                                                      â”‚    â”‚
â”‚  â”‚  Basic C1 (1 GB) | SSL: âœ“ | Port: 6380                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     CROSS-CUTTING CONCERNS                                   â”‚
â”‚                                  â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚            SECURITY LAYER     â”‚                                     â”‚     â”‚
â”‚  â”‚                              â”‚                                     â”‚     â”‚
â”‚  â”‚  ğŸ” Azure Key Vault          â”‚     ğŸ”’ Managed Identities           â”‚     â”‚
â”‚  â”‚     â€¢ API Keys               â”‚        â€¢ App Service â†’ Key Vault   â”‚     â”‚
â”‚  â”‚     â€¢ Connection Strings     â”‚        â€¢ Functions â†’ Key Vault     â”‚     â”‚
â”‚  â”‚     â€¢ Certificates           â”‚        â€¢ No hardcoded credentials  â”‚     â”‚
â”‚  â”‚     â€¢ Secrets Rotation       â”‚                                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                  â”‚                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚         MONITORING LAYER      â”‚                                     â”‚     â”‚
â”‚  â”‚                              â”‚                                     â”‚     â”‚
â”‚  â”‚  ğŸ“Š Application Insights     â”‚     ğŸ“ˆ Azure Monitor                â”‚     â”‚
â”‚  â”‚     â€¢ Real-time Metrics      â”‚        â€¢ Alerts & Dashboards       â”‚     â”‚
â”‚  â”‚     â€¢ Distributed Tracing    â”‚        â€¢ Cost Analysis             â”‚     â”‚
â”‚  â”‚     â€¢ Custom Events          â”‚        â€¢ Resource Health           â”‚     â”‚
â”‚  â”‚     â€¢ Performance Analysis   â”‚                                     â”‚     â”‚
â”‚  â”‚                              â”‚                                     â”‚     â”‚
â”‚  â”‚  ğŸ“ Log Analytics Workspace  â”‚     ğŸ“§ Communication Services       â”‚     â”‚
â”‚  â”‚     â€¢ Centralized Logging    â”‚        â€¢ Email Notifications       â”‚     â”‚
â”‚  â”‚     â€¢ KQL Queries            â”‚        â€¢ SMS Alerts                â”‚     â”‚
â”‚  â”‚     â€¢ 90-day Retention       â”‚                                     â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                                   â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚   RESPONSE TO USER   â”‚
                        â”‚  â€¢ JSON/WebSocket    â”‚
                        â”‚  â€¢ <2s latency       â”‚
                        â”‚  â€¢ Cached when poss. â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Detailed Component Diagrams

### 1. AI Processing Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      AI MULTI-AGENT SYSTEM                                â”‚
â”‚                                                                           â”‚
â”‚                                                                           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚                    â”‚   USER QUERY INPUT      â”‚                           â”‚
â”‚                    â”‚  "Can I take aspirin    â”‚                           â”‚
â”‚                    â”‚   with my diabetes      â”‚                           â”‚
â”‚                    â”‚   medication?"          â”‚                           â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                â”‚                                          â”‚
â”‚                                â–¼                                          â”‚
â”‚                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚                â”‚   ORCHESTRATOR AGENT             â”‚                       â”‚
â”‚                â”‚   (Azure OpenAI GPT-4)           â”‚                       â”‚
â”‚                â”‚                                  â”‚                       â”‚
â”‚                â”‚  1. Analyze query intent         â”‚                       â”‚
â”‚                â”‚  2. Identify entities (aspirin,  â”‚                       â”‚
â”‚                â”‚     diabetes medication)         â”‚                       â”‚
â”‚                â”‚  3. Determine agent routing:     â”‚                       â”‚
â”‚                â”‚     â†’ Drug Info Agent            â”‚                       â”‚
â”‚                â”‚     â†’ Medical Q&A Agent          â”‚                       â”‚
â”‚                â”‚  4. Manage conversation context  â”‚                       â”‚
â”‚                â”‚                                  â”‚                       â”‚
â”‚                â”‚  Temperature: 0.3 (consistent)   â”‚                       â”‚
â”‚                â”‚  Max Tokens: 500                 â”‚                       â”‚
â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                         â”‚              â”‚                                  â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚          â”‚                                            â”‚                   â”‚
â”‚          â–¼                                            â–¼                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ DRUG INFO AGENT â”‚                        â”‚ MEDICAL Q&A AGENT   â”‚      â”‚
â”‚  â”‚ (BioGPT)        â”‚                        â”‚ (Med42-Llama3)      â”‚      â”‚
â”‚  â”‚                 â”‚                        â”‚                     â”‚      â”‚
â”‚  â”‚ 1. Query RAG    â”‚                        â”‚ 1. Query RAG        â”‚      â”‚
â”‚  â”‚ 2. Search DB    â”‚                        â”‚ 2. Retrieve context â”‚      â”‚
â”‚  â”‚ 3. Generate     â”‚                        â”‚ 3. Generate answer  â”‚      â”‚
â”‚  â”‚                 â”‚                        â”‚                     â”‚      â”‚
â”‚  â”‚ Temp: 0.2       â”‚                        â”‚ Temp: 0.5           â”‚      â”‚
â”‚  â”‚ (Factual)       â”‚                        â”‚ (Balanced)          â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚           â”‚                                            â”‚                  â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                          â”‚                                                â”‚
â”‚                          â–¼                                                â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚              â”‚    RAG SYSTEM           â”‚                                  â”‚
â”‚              â”‚  (Azure AI Search)      â”‚                                  â”‚
â”‚              â”‚                         â”‚                                  â”‚
â”‚              â”‚  Vector Search Process: â”‚                                  â”‚
â”‚              â”‚                         â”‚                                  â”‚
â”‚              â”‚  1. Convert query to    â”‚                                  â”‚
â”‚              â”‚     embedding (1536D)   â”‚                                  â”‚
â”‚              â”‚                         â”‚                                  â”‚
â”‚              â”‚  2. Similarity search   â”‚                                  â”‚
â”‚              â”‚     in vector DB        â”‚                                  â”‚
â”‚              â”‚     (Cosine similarity) â”‚                                  â”‚
â”‚              â”‚                         â”‚                                  â”‚
â”‚              â”‚  3. Retrieve top-K docs â”‚                                  â”‚
â”‚              â”‚     (K=5)               â”‚                                  â”‚
â”‚              â”‚                         â”‚                                  â”‚
â”‚              â”‚  4. Return context with â”‚                                  â”‚
â”‚              â”‚     relevance scores    â”‚                                  â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                           â”‚                                               â”‚
â”‚                           â–¼                                               â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
â”‚              â”‚  KNOWLEDGE SOURCES      â”‚                                  â”‚
â”‚              â”‚                         â”‚                                  â”‚
â”‚              â”‚  ğŸ“š Medical Knowledge   â”‚                                  â”‚
â”‚              â”‚     â€¢ WHO Guidelines    â”‚                                  â”‚
â”‚              â”‚     â€¢ ICMR Advisories   â”‚                                  â”‚
â”‚              â”‚     â€¢ Research Papers   â”‚                                  â”‚
â”‚              â”‚                         â”‚                                  â”‚
â”‚              â”‚  ğŸ’Š Drug Database       â”‚                                  â”‚
â”‚              â”‚     â€¢ CDSCO Data        â”‚                                  â”‚
â”‚              â”‚     â€¢ Interactions      â”‚                                  â”‚
â”‚              â”‚     â€¢ Side Effects      â”‚                                  â”‚
â”‚              â”‚                         â”‚                                  â”‚
â”‚              â”‚  ğŸ“„ User Documents      â”‚                                  â”‚
â”‚              â”‚     â€¢ Prescriptions     â”‚                                  â”‚
â”‚              â”‚     â€¢ Medical History   â”‚                                  â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
â”‚                           â”‚                                               â”‚
â”‚                           â–¼                                               â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚                 â”‚  COMBINED ANSWER  â”‚                                     â”‚
â”‚                 â”‚  with citations   â”‚                                     â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Document Processing Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PRESCRIPTION PROCESSING PIPELINE                     â”‚
â”‚                                                                         â”‚
â”‚  USER ACTION                                                            â”‚
â”‚  â””â”€> ğŸ“± Uploads prescription image                                      â”‚
â”‚                  â”‚                                                      â”‚
â”‚                  â–¼                                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                             â”‚
â”‚         â”‚  WEB/MOBILE APP â”‚                                             â”‚
â”‚         â”‚  â€¢ Validate fileâ”‚                                             â”‚
â”‚         â”‚  â€¢ Max 10MB     â”‚                                             â”‚
â”‚         â”‚  â€¢ JPG/PNG/PDF  â”‚                                             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                             â”‚
â”‚                  â”‚ HTTPS POST /api/v1/documents/upload                  â”‚
â”‚                  â–¼                                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚         â”‚  API MANAGEMENT         â”‚                                     â”‚
â”‚         â”‚  â€¢ Authenticate user    â”‚                                     â”‚
â”‚         â”‚  â€¢ Rate limit check     â”‚                                     â”‚
â”‚         â”‚  â€¢ Log request          â”‚                                     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                  â”‚                                                      â”‚
â”‚                  â–¼                                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚         â”‚  APP SERVICE API        â”‚                                     â”‚
â”‚         â”‚  1. Validate JWT        â”‚                                     â”‚
â”‚         â”‚  2. Generate unique ID  â”‚                                     â”‚
â”‚         â”‚  3. Upload to Blob      â”‚                                     â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚
â”‚                  â”‚                                                      â”‚
â”‚                  â–¼                                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚    â”‚     AZURE BLOB STORAGE              â”‚                              â”‚
â”‚    â”‚                                     â”‚                              â”‚
â”‚    â”‚  Container: prescription-uploads    â”‚                              â”‚
â”‚    â”‚  Path: {user_id}/{timestamp}_{file}â”‚                              â”‚
â”‚    â”‚  Metadata:                          â”‚                              â”‚
â”‚    â”‚    - user_id                        â”‚                              â”‚
â”‚    â”‚    - upload_date                    â”‚                              â”‚
â”‚    â”‚    - content_type                   â”‚                              â”‚
â”‚    â”‚                                     â”‚                              â”‚
â”‚    â”‚  âœ“ Stored securely                  â”‚                              â”‚
â”‚    â”‚  âœ“ Generate SAS token for access    â”‚                              â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                  â”‚                                                      â”‚
â”‚                  â”‚ BLOB CREATED EVENT                                   â”‚
â”‚                  â–¼                                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚    â”‚  AZURE FUNCTION (Triggered)         â”‚                              â”‚
â”‚    â”‚  Function: process-document-async   â”‚                              â”‚
â”‚    â”‚                                     â”‚                              â”‚
â”‚    â”‚  1. Receive blob trigger event      â”‚                              â”‚
â”‚    â”‚  2. Get SAS URL for blob            â”‚                              â”‚
â”‚    â”‚  3. Call Document Intelligence      â”‚                              â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                  â”‚                                                      â”‚
â”‚                  â–¼                                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚    â”‚     AZURE DOCUMENT INTELLIGENCE                 â”‚                  â”‚
â”‚    â”‚     (Form Recognizer)                           â”‚                  â”‚
â”‚    â”‚                                                 â”‚                  â”‚
â”‚    â”‚  Processing Steps:                              â”‚                  â”‚
â”‚    â”‚                                                 â”‚                  â”‚
â”‚    â”‚  1. OCR Text Extraction                         â”‚                  â”‚
â”‚    â”‚     â€¢ Read handwritten text                     â”‚                  â”‚
â”‚    â”‚     â€¢ Read printed text                         â”‚                  â”‚
â”‚    â”‚     â€¢ Detect tables                             â”‚                  â”‚
â”‚    â”‚                                                 â”‚                  â”‚
â”‚    â”‚  2. Layout Analysis                             â”‚                  â”‚
â”‚    â”‚     â€¢ Identify sections                         â”‚                  â”‚
â”‚    â”‚     â€¢ Parse structure                           â”‚                  â”‚
â”‚    â”‚                                                 â”‚                  â”‚
â”‚    â”‚  3. Custom Model (Indian Prescriptions)         â”‚                  â”‚
â”‚    â”‚     â€¢ Extract medicine names                    â”‚                  â”‚
â”‚    â”‚     â€¢ Extract dosage                            â”‚                  â”‚
â”‚    â”‚     â€¢ Extract frequency                         â”‚                  â”‚
â”‚    â”‚     â€¢ Extract doctor info                       â”‚                  â”‚
â”‚    â”‚                                                 â”‚                  â”‚
â”‚    â”‚  4. Return JSON with confidence scores          â”‚                  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                  â”‚                                                      â”‚
â”‚                  â–¼                                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚    â”‚  EXTRACTED DATA (JSON)              â”‚                              â”‚
â”‚    â”‚                                     â”‚                              â”‚
â”‚    â”‚  {                                  â”‚                              â”‚
â”‚    â”‚    "medicines": [                   â”‚                              â”‚
â”‚    â”‚      {                              â”‚                              â”‚
â”‚    â”‚        "name": "Metformin",         â”‚                              â”‚
â”‚    â”‚        "dosage": "500mg",           â”‚                              â”‚
â”‚    â”‚        "frequency": "BD",           â”‚                              â”‚
â”‚    â”‚        "confidence": 0.95           â”‚                              â”‚
â”‚    â”‚      }                              â”‚                              â”‚
â”‚    â”‚    ],                               â”‚                              â”‚
â”‚    â”‚    "doctor_name": "Dr. Sharma",     â”‚                              â”‚
â”‚    â”‚    "date": "2025-10-15",            â”‚                              â”‚
â”‚    â”‚    "diagnosis": "Type 2 Diabetes"   â”‚                              â”‚
â”‚    â”‚  }                                  â”‚                              â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                  â”‚                                                      â”‚
â”‚                  â–¼                                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚    â”‚  SAVE TO DATABASES                  â”‚                              â”‚
â”‚    â”‚                                     â”‚                              â”‚
â”‚    â”‚  1. Azure SQL (Structured)          â”‚                              â”‚
â”‚    â”‚     INSERT INTO Prescriptions       â”‚                              â”‚
â”‚    â”‚     INSERT INTO Medicines           â”‚                              â”‚
â”‚    â”‚                                     â”‚                              â”‚
â”‚    â”‚  2. Blob Storage (Extracted JSON)   â”‚                              â”‚
â”‚    â”‚     Container: extracted-data       â”‚                              â”‚
â”‚    â”‚                                     â”‚                              â”‚
â”‚    â”‚  3. AI Search (For RAG)             â”‚                              â”‚
â”‚    â”‚     Index user's prescription       â”‚                              â”‚
â”‚    â”‚     For personalized context        â”‚                              â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                  â”‚                                                      â”‚
â”‚                  â–¼                                                      â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚    â”‚  NOTIFY USER                        â”‚                              â”‚
â”‚    â”‚                                     â”‚                              â”‚
â”‚    â”‚  â€¢ WebSocket notification           â”‚                              â”‚
â”‚    â”‚  â€¢ "Processing complete"            â”‚                              â”‚
â”‚    â”‚  â€¢ Show extracted medicines         â”‚                              â”‚
â”‚    â”‚  â€¢ Allow user corrections           â”‚                              â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                         â”‚
â”‚  â±ï¸ Total Processing Time: 5-10 seconds                                 â”‚
â”‚  âœ… Confidence Threshold: 75% (flag for review if lower)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Chat Query Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CHAT QUERY PROCESSING                              â”‚
â”‚                                                                           â”‚
â”‚  USER INPUT                                                               â”‚
â”‚  â””â”€> ğŸ’¬ "What are the side effects of Metformin?"                        â”‚
â”‚              â”‚                                                            â”‚
â”‚              â–¼                                                            â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                   â”‚
â”‚     â”‚  CHECK CACHE    â”‚                                                   â”‚
â”‚     â”‚  (Redis)        â”‚                                                   â”‚
â”‚     â”‚                 â”‚                                                   â”‚
â”‚     â”‚  Key: MD5(query)â”‚                                                   â”‚
â”‚     â”‚  TTL: 1 hour    â”‚                                                   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚              â”‚                                                            â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                                      â”‚
â”‚        â”‚           â”‚                                                      â”‚
â”‚        â–¼           â–¼                                                      â”‚
â”‚   [CACHE HIT]  [CACHE MISS]                                               â”‚
â”‚        â”‚           â”‚                                                      â”‚
â”‚        â”‚           â–¼                                                      â”‚
â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚        â”‚  â”‚  APP SERVICE - PROCESS QUERY        â”‚                         â”‚
â”‚        â”‚  â”‚                                     â”‚                         â”‚
â”‚        â”‚  â”‚  1. Validate user session           â”‚                         â”‚
â”‚        â”‚  â”‚  2. Load conversation history       â”‚                         â”‚
â”‚        â”‚  â”‚     from Cosmos DB                  â”‚                         â”‚
â”‚        â”‚  â”‚  3. Check user's prescriptions      â”‚                         â”‚
â”‚        â”‚  â”‚     from SQL DB                     â”‚                         â”‚
â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚        â”‚                â”‚                                                 â”‚
â”‚        â”‚                â–¼                                                 â”‚
â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚        â”‚  â”‚  ORCHESTRATOR (GPT-4)               â”‚                         â”‚
â”‚        â”‚  â”‚                                     â”‚                         â”‚
â”‚        â”‚  â”‚  Analyze: "side effects" + drug     â”‚                         â”‚
â”‚        â”‚  â”‚  Route to: Drug Info Agent          â”‚                         â”‚
â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚        â”‚                â”‚                                                 â”‚
â”‚        â”‚                â–¼                                                 â”‚
â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚        â”‚  â”‚  DRUG INFO AGENT (BioGPT)           â”‚                         â”‚
â”‚        â”‚  â”‚                                     â”‚                         â”‚
â”‚        â”‚  â”‚  Step 1: RAG Retrieval              â”‚                         â”‚
â”‚        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                         â”‚
â”‚        â”‚  â”‚  â”‚ Azure AI Search              â”‚    â”‚                         â”‚
â”‚        â”‚  â”‚  â”‚ â€¢ Convert query to embedding â”‚    â”‚                         â”‚
â”‚        â”‚  â”‚  â”‚ â€¢ Vector similarity search   â”‚    â”‚                         â”‚
â”‚        â”‚  â”‚  â”‚ â€¢ Retrieve top-5 docs        â”‚    â”‚                         â”‚
â”‚        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                         â”‚
â”‚        â”‚  â”‚                                     â”‚                         â”‚
â”‚        â”‚  â”‚  Step 2: SQL Database Lookup        â”‚                         â”‚
â”‚        â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                         â”‚
â”‚        â”‚  â”‚  â”‚ Query DrugDatabase table     â”‚    â”‚                         â”‚
â”‚        â”‚  â”‚  â”‚ WHERE generic_name='Metformin'â”‚    â”‚                         â”‚
â”‚        â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                         â”‚
â”‚        â”‚  â”‚                                     â”‚                         â”‚
â”‚        â”‚  â”‚  Step 3: Generate Response          â”‚                         â”‚
â”‚        â”‚  â”‚  â€¢ Use retrieved context            â”‚                         â”‚
â”‚        â”‚  â”‚  â€¢ Cite sources                     â”‚                         â”‚
â”‚        â”‚  â”‚  â€¢ Add medical disclaimer           â”‚                         â”‚
â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚        â”‚                â”‚                                                 â”‚
â”‚        â”‚                â–¼                                                 â”‚
â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚        â”‚  â”‚  SAFETY LAYER                       â”‚                         â”‚
â”‚        â”‚  â”‚                                     â”‚                         â”‚
â”‚        â”‚  â”‚  1. Content filtering               â”‚                         â”‚
â”‚        â”‚  â”‚  2. Check for harmful content       â”‚                         â”‚
â”‚        â”‚  â”‚  3. Add disclaimers                 â”‚                         â”‚
â”‚        â”‚  â”‚  4. Log interaction                 â”‚                         â”‚
â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚        â”‚                â”‚                                                 â”‚
â”‚        â”‚                â–¼                                                 â”‚
â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚        â”‚  â”‚  SAVE TO DATABASES                  â”‚                         â”‚
â”‚        â”‚  â”‚                                     â”‚                         â”‚
â”‚        â”‚  â”‚  1. Cosmos DB (chat message)        â”‚                         â”‚
â”‚        â”‚  â”‚     â€¢ conversation_id               â”‚                         â”‚
â”‚        â”‚  â”‚     â€¢ user message                  â”‚                         â”‚
â”‚        â”‚  â”‚     â€¢ assistant response            â”‚                         â”‚
â”‚        â”‚  â”‚     â€¢ timestamp                     â”‚                         â”‚
â”‚        â”‚  â”‚     â€¢ metadata (tokens, latency)    â”‚                         â”‚
â”‚        â”‚  â”‚                                     â”‚                         â”‚
â”‚        â”‚  â”‚  2. Application Insights            â”‚                         â”‚
â”‚        â”‚  â”‚     â€¢ Custom event: chat_completed  â”‚                         â”‚
â”‚        â”‚  â”‚     â€¢ Metrics: latency, tokens      â”‚                         â”‚
â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚        â”‚                â”‚                                                 â”‚
â”‚        â”‚                â–¼                                                 â”‚
â”‚        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚        â”‚  â”‚  CACHE RESPONSE (Redis)             â”‚                         â”‚
â”‚        â”‚  â”‚                                     â”‚                         â”‚
â”‚        â”‚  â”‚  SET MD5(query) = response          â”‚                         â”‚
â”‚        â”‚  â”‚  EXPIRE 3600 (1 hour)               â”‚                         â”‚
â”‚        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚        â”‚                â”‚                                                 â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚
â”‚                         â”‚                                                 â”‚
â”‚                         â–¼                                                 â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚            â”‚  FINAL RESPONSE             â”‚                                â”‚
â”‚            â”‚                             â”‚                                â”‚
â”‚            â”‚  "Common side effects of    â”‚                                â”‚
â”‚            â”‚  Metformin include:         â”‚                                â”‚
â”‚            â”‚  â€¢ Nausea                   â”‚                                â”‚
â”‚            â”‚  â€¢ Diarrhea                 â”‚                                â”‚
â”‚            â”‚  â€¢ Stomach upset            â”‚                                â”‚
â”‚            â”‚                             â”‚                                â”‚
â”‚            â”‚  These are usually mild and â”‚                                â”‚
â”‚            â”‚  temporary. Take with food  â”‚                                â”‚
â”‚            â”‚  to minimize discomfort.    â”‚                                â”‚
â”‚            â”‚                             â”‚                                â”‚
â”‚            â”‚  âš ï¸ Educational info only.   â”‚                                â”‚
â”‚            â”‚  Consult your doctor.       â”‚                                â”‚
â”‚            â”‚                             â”‚                                â”‚
â”‚            â”‚  Sources: CDSCO Database,   â”‚                                â”‚
â”‚            â”‚  WHO Guidelines             â”‚                                â”‚
â”‚            â”‚                             â”‚                                â”‚
â”‚            â”‚  [from_cache: true/false]   â”‚                                â”‚
â”‚            â”‚  [latency: 0.8s]            â”‚                                â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                                                                           â”‚
â”‚  ğŸ“Š Performance:                                                          â”‚
â”‚     â€¢ Cache hit: <100ms                                                   â”‚
â”‚     â€¢ Cache miss + AI: 1-3s                                               â”‚
â”‚     â€¢ Cache hit rate target: >60%                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Service Integration Map

### Complete Service Dependencies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SERVICE DEPENDENCY GRAPH                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CDN        â”‚â”€â”€â”€â”€â”€>â”‚  App Gateway â”‚â”€â”€â”€â”€â”€>â”‚   APIM           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                       â”‚
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚                        â”‚            â”‚
                              â–¼                        â–¼            â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Azure AD    â”‚        â”‚ App Service  â”‚  â”‚ Functionsâ”‚
                      â”‚  B2C         â”‚        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚               â”‚
                                                     â”‚               â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                           â”‚                         â”‚               â”‚
                           â–¼                         â–¼               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Key Vault   â”‚<â”€â”€â”€â”€â”€â”€â”€â”‚ All Services â”‚  â”‚ Blob Storage â”‚
                    â”‚              â”‚        â”‚ use Managed  â”‚  â”‚              â”‚
                    â”‚  â€¢ API Keys  â”‚        â”‚ Identity for â”‚  â”‚ â€¢ Trigger    â”‚
                    â”‚  â€¢ Secrets   â”‚        â”‚ auth         â”‚  â”‚   Functions  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                      â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AI SERVICES CLUSTER                           â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  OpenAI    â”‚â”€â”€â”€>â”‚ AI Foundry â”‚â”€â”€â”€>â”‚ Doc Intel   â”‚   â”‚AI Search â”‚ â”‚
â”‚  â”‚  GPT-4     â”‚    â”‚ Med42      â”‚    â”‚ OCR         â”‚   â”‚Vector DB â”‚ â”‚
â”‚  â”‚            â”‚    â”‚ BioGPT     â”‚    â”‚             â”‚   â”‚          â”‚ â”‚
â”‚  â”‚Orchestratorâ”‚    â”‚ BiomedCLIP â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚      â”‚
â”‚                                                               â”‚      â”‚
â”‚                         All connect to â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚                        â”‚              â”‚
                           â–¼                        â–¼              â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   SQL DB     â”‚        â”‚  Cosmos DB   â”‚  â”‚    Redis     â”‚
                    â”‚              â”‚        â”‚              â”‚  â”‚              â”‚
                    â”‚ â€¢ Users      â”‚        â”‚ â€¢ Chat       â”‚  â”‚ â€¢ Cache      â”‚
                    â”‚ â€¢ Drugs      â”‚        â”‚ â€¢ Messages   â”‚  â”‚ â€¢ Sessions   â”‚
                    â”‚ â€¢ Rx         â”‚        â”‚              â”‚  â”‚              â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                        â”‚              â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                    â”‚
                                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      MONITORING CLUSTER                               â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ App Insights    â”‚â”€â”€â”€>â”‚  Log Analytics   â”‚â”€â”€â”€>â”‚ Azure Monitor   â”‚ â”‚
â”‚  â”‚                 â”‚    â”‚                  â”‚    â”‚                 â”‚ â”‚
â”‚  â”‚ â€¢ Metrics       â”‚    â”‚ â€¢ Centralized    â”‚    â”‚ â€¢ Dashboards    â”‚ â”‚
â”‚  â”‚ â€¢ Traces        â”‚    â”‚   Logs           â”‚    â”‚ â€¢ Alerts        â”‚ â”‚
â”‚  â”‚ â€¢ Events        â”‚    â”‚ â€¢ KQL Queries    â”‚    â”‚                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                   â”‚                                  â”‚
â”‚                                   â–¼                                  â”‚
â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚                         â”‚ Communication    â”‚                         â”‚
â”‚                         â”‚ Services         â”‚                         â”‚
â”‚                         â”‚ â€¢ Email alerts   â”‚                         â”‚
â”‚                         â”‚ â€¢ SMS alerts     â”‚                         â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

KEY:
â”€â”€â”€â”€> Direct dependency (calls service)
- - -> Indirect dependency (uses data)
<â”€â”€â”€> Bidirectional (sends & receives)
```

---

## Network Architecture

### Virtual Network Topology

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AZURE VIRTUAL NETWORK                                â”‚
â”‚                    medical-chatbot-vnet                                 â”‚
â”‚                    Address Space: 10.0.0.0/16                           â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SUBNET: default-subnet                                          â”‚  â”‚
â”‚  â”‚  Address Range: 10.0.1.0/24                                      â”‚  â”‚
â”‚  â”‚  Available IPs: 251                                              â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  Resources:                                                      â”‚  â”‚
â”‚  â”‚  â€¢ None (reserved for future)                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SUBNET: app-service-subnet                                      â”‚  â”‚
â”‚  â”‚  Address Range: 10.0.2.0/24                                      â”‚  â”‚
â”‚  â”‚  Service Endpoints: Microsoft.Storage, Microsoft.Sql            â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  Resources:                                                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ App Service (VNet Integration)                              â”‚  â”‚
â”‚  â”‚  â”œâ”€ Function App (VNet Integration)                             â”‚  â”‚
â”‚  â”‚  â””â”€ Private Endpoints to storage & SQL                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SUBNET: ai-services-subnet                                      â”‚  â”‚
â”‚  â”‚  Address Range: 10.0.3.0/24                                      â”‚  â”‚
â”‚  â”‚  Service Endpoints: Microsoft.CognitiveServices                  â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  Resources:                                                      â”‚  â”‚
â”‚  â”‚  â”œâ”€ Private Endpoints to OpenAI                                 â”‚  â”‚
â”‚  â”‚  â”œâ”€ Private Endpoints to Document Intelligence                  â”‚  â”‚
â”‚  â”‚  â””â”€ Private Endpoints to AI Search                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  NETWORK SECURITY GROUP: medical-chatbot-nsg                     â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  INBOUND RULES:                                                  â”‚  â”‚
â”‚  â”‚  Priority 100: Allow HTTPS (443) from Internet                  â”‚  â”‚
â”‚  â”‚  Priority 110: Allow HTTP (80) from Internet â†’ Redirect to 443  â”‚  â”‚
â”‚  â”‚  Priority 200: Allow Azure Health Probes                        â”‚  â”‚
â”‚  â”‚  Priority 300: Allow VNet-to-VNet communication                 â”‚  â”‚
â”‚  â”‚  Priority 4096: Deny all other inbound                          â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  OUTBOUND RULES:                                                 â”‚  â”‚
â”‚  â”‚  Priority 100: Allow HTTPS to Azure Services                    â”‚  â”‚
â”‚  â”‚  Priority 110: Allow DNS (53)                                   â”‚  â”‚
â”‚  â”‚  Priority 200: Allow to VNet                                    â”‚  â”‚
â”‚  â”‚  Priority 4096: Deny all other outbound                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  PRIVATE DNS ZONES                                               â”‚  â”‚
â”‚  â”‚                                                                  â”‚  â”‚
â”‚  â”‚  â”œâ”€ privatelink.blob.core.windows.net                           â”‚  â”‚
â”‚  â”‚  â”œâ”€ privatelink.database.windows.net                            â”‚  â”‚
â”‚  â”‚  â”œâ”€ privatelink.documents.azure.com                             â”‚  â”‚
â”‚  â”‚  â”œâ”€ privatelink.openai.azure.com                                â”‚  â”‚
â”‚  â”‚  â””â”€ privatelink.search.windows.net                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

INTERNET
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Application Gateway   â”‚
â”‚  Public IP             â”‚
â”‚  Frontend: 0.0.0.0/0   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ (Forwards to VNet)
            â–¼
    [VNet: 10.0.0.0/16]
            â”‚
            â””â”€> [App Services, Functions, etc.]
```

---

## Security Architecture

### Defense in Depth

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SECURITY LAYERS (Defense in Depth)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 7: USER/APPLICATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Azure AD B2C Authentication                                         â”‚
â”‚     â€¢ Multi-factor authentication (MFA)                                â”‚
â”‚     â€¢ Passwordless (phone/email OTP)                                   â”‚
â”‚     â€¢ Social login (Google, Facebook)                                  â”‚
â”‚     â€¢ JWT tokens with 1-hour expiry                                    â”‚
â”‚     â€¢ Refresh tokens with 30-day expiry                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 6: EDGE/PERIMETER
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ›¡ï¸ Web Application Firewall (WAF)                                      â”‚
â”‚     â€¢ OWASP Top 10 protection                                          â”‚
â”‚     â€¢ Custom rules for medical data                                    â”‚
â”‚     â€¢ SQL injection prevention                                         â”‚
â”‚     â€¢ XSS (Cross-Site Scripting) protection                            â”‚
â”‚     â€¢ DDoS protection (Application Gateway)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 5: API GATEWAY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸš¦ API Management Security                                             â”‚
â”‚     â€¢ Rate limiting: 100 req/min per user                              â”‚
â”‚     â€¢ IP whitelisting/blacklisting                                     â”‚
â”‚     â€¢ JWT validation before backend                                    â”‚
â”‚     â€¢ API key rotation every 90 days                                   â”‚
â”‚     â€¢ Request/response validation                                      â”‚
â”‚     â€¢ CORS policy enforcement                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 4: APPLICATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”’ Application Security                                                â”‚
â”‚     â€¢ Managed Identity (no stored credentials)                         â”‚
â”‚     â€¢ Input validation and sanitization                                â”‚
â”‚     â€¢ Output encoding                                                  â”‚
â”‚     â€¢ HTTPS only (TLS 1.3)                                             â”‚
â”‚     â€¢ Secure headers (HSTS, CSP, X-Frame-Options)                      â”‚
â”‚     â€¢ Session management (Redis with secure cookies)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 3: NETWORK
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸŒ Network Security                                                    â”‚
â”‚     â€¢ Virtual Network isolation                                        â”‚
â”‚     â€¢ Network Security Groups (NSGs)                                   â”‚
â”‚     â€¢ Private Endpoints for Azure services                             â”‚
â”‚     â€¢ No public access to databases                                    â”‚
â”‚     â€¢ Service Endpoints for trusted services                           â”‚
â”‚     â€¢ Private DNS zones                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 2: DATA
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ’¾ Data Security                                                       â”‚
â”‚     â€¢ Encryption at rest: AES-256                                      â”‚
â”‚     â€¢ Encryption in transit: TLS 1.3                                   â”‚
â”‚     â€¢ Field-level encryption for PII                                   â”‚
â”‚     â€¢ Soft delete enabled (7-90 days)                                  â”‚
â”‚     â€¢ Automated backups (geo-redundant)                                â”‚
â”‚     â€¢ Access auditing and logging                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 1: SECRETS MANAGEMENT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”‘ Azure Key Vault                                                     â”‚
â”‚     â€¢ All secrets stored centrally                                     â”‚
â”‚     â€¢ Hardware Security Module (HSM) backed                            â”‚
â”‚     â€¢ Access via Managed Identity only                                 â”‚
â”‚     â€¢ Secret rotation every 90 days                                    â”‚
â”‚     â€¢ Audit logging for all access                                     â”‚
â”‚     â€¢ Purge protection enabled                                         â”‚
â”‚     â€¢ Soft delete (90 days)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LAYER 0: IDENTITY & ACCESS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ Role-Based Access Control (RBAC)                                    â”‚
â”‚     â€¢ Principle of least privilege                                     â”‚
â”‚     â€¢ Separate dev/staging/prod access                                 â”‚
â”‚     â€¢ Managed identities for service-to-service                        â”‚
â”‚     â€¢ No service principals with passwords                             â”‚
â”‚     â€¢ MFA required for admin access                                    â”‚
â”‚     â€¢ Regular access reviews                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CROSS-CUTTING SECURITY CONTROLS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š Monitoring & Compliance                                             â”‚
â”‚     â€¢ Azure Security Center (Defender for Cloud)                       â”‚
â”‚     â€¢ Continuous compliance scanning                                   â”‚
â”‚     â€¢ Threat detection and alerts                                      â”‚
â”‚     â€¢ Vulnerability scanning                                           â”‚
â”‚     â€¢ Security score monitoring                                        â”‚
â”‚     â€¢ Incident response automation                                     â”‚
â”‚                                                                         â”‚
â”‚  ğŸ“ Audit & Compliance                                                  â”‚
â”‚     â€¢ All actions logged to Log Analytics                              â”‚
â”‚     â€¢ 7-year retention for compliance                                  â”‚
â”‚     â€¢ DPDPA compliance (India)                                         â”‚
â”‚     â€¢ GDPR-ready architecture                                          â”‚
â”‚     â€¢ HIPAA-equivalent controls                                        â”‚
â”‚     â€¢ Regular security audits                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Monitoring & Observability

### Observability Stack

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OBSERVABILITY ARCHITECTURE                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              USER REQUEST
                                   â”‚
                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INSTRUMENTATION LAYER (All Services)                                â”‚
â”‚                                                                       â”‚
â”‚  App Service:              Functions:              AI Services:      â”‚
â”‚  â€¢ HTTP requests          â€¢ Function executions   â€¢ API calls        â”‚
â”‚  â€¢ Dependencies           â€¢ Queue triggers        â€¢ Token usage      â”‚
â”‚  â€¢ Exceptions             â€¢ Blob triggers         â€¢ Latency          â”‚
â”‚  â€¢ Custom events          â€¢ Timer triggers        â€¢ Errors           â”‚
â”‚                                                                       â”‚
â”‚  All send telemetry via Application Insights SDK                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    APPLICATION INSIGHTS                               â”‚
â”‚                    (Telemetry Collection)                             â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Metrics    â”‚  â”‚  Logs       â”‚  â”‚  Traces     â”‚  â”‚  Events     â”‚ â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚ â”‚
â”‚  â”‚ â€¢ Request   â”‚  â”‚ â€¢ Error logsâ”‚  â”‚ â€¢ Dist.     â”‚  â”‚ â€¢ Custom    â”‚ â”‚
â”‚  â”‚   rate      â”‚  â”‚ â€¢ Info logs â”‚  â”‚   tracing   â”‚  â”‚   events    â”‚ â”‚
â”‚  â”‚ â€¢ Response  â”‚  â”‚ â€¢ Debug logsâ”‚  â”‚ â€¢ Dep. map  â”‚  â”‚ â€¢ User      â”‚ â”‚
â”‚  â”‚   time      â”‚  â”‚ â€¢ Warnings  â”‚  â”‚ â€¢ Call tree â”‚  â”‚   actions   â”‚ â”‚
â”‚  â”‚ â€¢ Error     â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚ â”‚
â”‚  â”‚   rate      â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                       â”‚
â”‚  Sampling: Adaptive (reduces costs while maintaining visibility)     â”‚
â”‚  Retention: 90 days                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LOG ANALYTICS WORKSPACE                            â”‚
â”‚                    (Centralized Log Storage)                          â”‚
â”‚                                                                       â”‚
â”‚  KQL Queries for Analysis:                                           â”‚
â”‚                                                                       â”‚
â”‚  // Find errors in last hour                                         â”‚
â”‚  traces                                                              â”‚
â”‚  | where timestamp > ago(1h)                                         â”‚
â”‚  | where severityLevel == "Error"                                    â”‚
â”‚  | summarize count() by cloud_RoleName                               â”‚
â”‚                                                                       â”‚
â”‚  // Slow requests                                                    â”‚
â”‚  requests                                                            â”‚
â”‚  | where duration > 5000  // > 5 seconds                             â”‚
â”‚  | project timestamp, name, duration, resultCode                     â”‚
â”‚  | order by duration desc                                            â”‚
â”‚                                                                       â”‚
â”‚  // AI token usage                                                   â”‚
â”‚  customEvents                                                        â”‚
â”‚  | where name == "ai_completion"                                     â”‚
â”‚  | summarize total_tokens = sum(toint(customDimensions.tokens))     â”‚
â”‚    by bin(timestamp, 1h)                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AZURE MONITOR                                  â”‚
â”‚                    (Alerts & Dashboards)                              â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ALERT RULES                                                  â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  ğŸš¨ CRITICAL (PagerDuty/SMS)                                  â”‚   â”‚
â”‚  â”‚     â€¢ API error rate > 5% (5 min window)                      â”‚   â”‚
â”‚  â”‚     â€¢ Service health: degraded/down                           â”‚   â”‚
â”‚  â”‚     â€¢ Database connection failed                              â”‚   â”‚
â”‚  â”‚     â€¢ Disk space > 90%                                        â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  âš ï¸  WARNING (Email)                                           â”‚   â”‚
â”‚  â”‚     â€¢ Error rate > 2% (15 min window)                         â”‚   â”‚
â”‚  â”‚     â€¢ Response time > 5s (10 min avg)                         â”‚   â”‚
â”‚  â”‚     â€¢ OCR confidence < 75% (20+ docs)                         â”‚   â”‚
â”‚  â”‚     â€¢ Daily cost > $100                                       â”‚   â”‚
â”‚  â”‚     â€¢ Cache hit rate < 40%                                    â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  â„¹ï¸  INFO (Dashboard only)                                     â”‚   â”‚
â”‚  â”‚     â€¢ High traffic (>1000 req/min)                            â”‚   â”‚
â”‚  â”‚     â€¢ Auto-scaling triggered                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  DASHBOARDS                                                   â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  ğŸ“Š Operations Dashboard:                                     â”‚   â”‚
â”‚  â”‚     â€¢ Request rate (real-time)                                â”‚   â”‚
â”‚  â”‚     â€¢ Error rate                                              â”‚   â”‚
â”‚  â”‚     â€¢ P50/P95/P99 latency                                     â”‚   â”‚
â”‚  â”‚     â€¢ Active users                                            â”‚   â”‚
â”‚  â”‚     â€¢ Service health                                          â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  ğŸ’° Cost Dashboard:                                            â”‚   â”‚
â”‚  â”‚     â€¢ Daily spend by service                                  â”‚   â”‚
â”‚  â”‚     â€¢ AI token usage & cost                                   â”‚   â”‚
â”‚  â”‚     â€¢ Storage costs                                           â”‚   â”‚
â”‚  â”‚     â€¢ Compute costs                                           â”‚   â”‚
â”‚  â”‚     â€¢ Forecasted monthly cost                                 â”‚   â”‚
â”‚  â”‚                                                               â”‚   â”‚
â”‚  â”‚  ğŸ¥ Medical Metrics Dashboard:                                â”‚   â”‚
â”‚  â”‚     â€¢ Documents processed                                     â”‚   â”‚
â”‚  â”‚     â€¢ OCR accuracy trends                                     â”‚   â”‚
â”‚  â”‚     â€¢ Top medicines queried                                   â”‚   â”‚
â”‚  â”‚     â€¢ User engagement (DAU/MAU)                               â”‚   â”‚
â”‚  â”‚     â€¢ Chat completion rate                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ACTION GROUPS                                      â”‚
â”‚                    (Notification & Automation)                        â”‚
â”‚                                                                       â”‚
â”‚  When alert fires:                                                   â”‚
â”‚                                                                       â”‚
â”‚  1. Send notification:                                               â”‚
â”‚     â€¢ Email to on-call engineer                                      â”‚
â”‚     â€¢ SMS for critical alerts                                        â”‚
â”‚     â€¢ Slack/Teams message                                            â”‚
â”‚     â€¢ PagerDuty incident                                             â”‚
â”‚                                                                       â”‚
â”‚  2. Automated remediation:                                           â”‚
â”‚     â€¢ Restart unhealthy App Service                                  â”‚
â”‚     â€¢ Scale up if CPU > 80%                                          â”‚
â”‚     â€¢ Clear cache if memory > 90%                                    â”‚
â”‚     â€¢ Run diagnostic scripts                                         â”‚
â”‚                                                                       â”‚
â”‚  3. Create incident ticket:                                          â”‚
â”‚     â€¢ Log in ticketing system                                        â”‚
â”‚     â€¢ Attach relevant logs                                           â”‚
â”‚     â€¢ Assign to team                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CUSTOM TELEMETRY EVENTS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Event Name              Properties                  Metrics          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚  document_uploaded       â€¢ user_id                  â€¢ file_size_mb   â”‚
â”‚                          â€¢ file_type                â€¢ upload_time_ms â”‚
â”‚                          â€¢ document_type                             â”‚
â”‚                                                                       â”‚
â”‚  ocr_completed           â€¢ user_id                  â€¢ confidence     â”‚
â”‚                          â€¢ document_id              â€¢ processing_ms  â”‚
â”‚                          â€¢ model_version            â€¢ field_count    â”‚
â”‚                                                                       â”‚
â”‚  chat_message            â€¢ user_id                  â€¢ tokens         â”‚
â”‚                          â€¢ conversation_id          â€¢ latency_ms     â”‚
â”‚                          â€¢ agent_used               â€¢ cost_usd       â”‚
â”‚                          â€¢ cache_hit                                 â”‚
â”‚                                                                       â”‚
â”‚  rag_retrieval           â€¢ query                    â€¢ num_results    â”‚
â”‚                          â€¢ index_name               â€¢ search_time_ms â”‚
â”‚                          â€¢ top_score                                 â”‚
â”‚                                                                       â”‚
â”‚  ai_completion           â€¢ model                    â€¢ tokens_in      â”‚
â”‚                          â€¢ deployment               â€¢ tokens_out     â”‚
â”‚                          â€¢ temperature              â€¢ latency_ms     â”‚
â”‚                                                                       â”‚
â”‚  error_occurred          â€¢ error_type               â€¢ stack_trace    â”‚
â”‚                          â€¢ user_id                  â€¢ timestamp      â”‚
â”‚                          â€¢ service                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Deployment Architecture

### CI/CD Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DEPLOYMENT PIPELINE                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

DEVELOPMENT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¨â€ğŸ’» Developer                                                          â”‚
â”‚     â”‚                                                                  â”‚
â”‚     â”‚ git push origin feature/new-feature                             â”‚
â”‚     â–¼                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚  â”‚  GitHub Repository                          â”‚                       â”‚
â”‚  â”‚  â€¢ main branch (protected)                  â”‚                       â”‚
â”‚  â”‚  â€¢ feature/* branches                       â”‚                       â”‚
â”‚  â”‚  â€¢ Pull Request required for main           â”‚                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ (Webhook trigger)
                         â–¼
CONTINUOUS INTEGRATION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  AZURE DEVOPS / GITHUB ACTIONS                                 â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  Stage 1: Build & Test                                         â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚  â”‚
â”‚  â”‚  1. Checkout code                                              â”‚  â”‚
â”‚  â”‚  2. Install dependencies (pip/npm)                             â”‚  â”‚
â”‚  â”‚  3. Run linters (pylint, eslint)                               â”‚  â”‚
â”‚  â”‚  4. Run unit tests                                             â”‚  â”‚
â”‚  â”‚  5. Code coverage check (>80%)                                 â”‚  â”‚
â”‚  â”‚  6. Security scan (Dependabot, Snyk)                           â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  âœ… All tests pass â†’ Continue                                   â”‚  â”‚
â”‚  â”‚  âŒ Tests fail â†’ Block PR, notify developer                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                            â”‚
â”‚                         â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Stage 2: Build Artifacts                                      â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚  â”‚
â”‚  â”‚  1. Build Docker image (if applicable)                         â”‚  â”‚
â”‚  â”‚  2. Create deployment package                                  â”‚  â”‚
â”‚  â”‚  3. Generate build manifest                                    â”‚  â”‚
â”‚  â”‚  4. Upload to artifact storage                                 â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  Artifacts:                                                     â”‚  â”‚
â”‚  â”‚  â€¢ app-service-v1.2.3.zip                                      â”‚  â”‚
â”‚  â”‚  â€¢ functions-v1.2.3.zip                                        â”‚  â”‚
â”‚  â”‚  â€¢ docker-image:v1.2.3                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
CONTINUOUS DEPLOYMENT - STAGING
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Deploy to Staging Environment                                 â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  1. Deploy to staging App Service slot                         â”‚  â”‚
â”‚  â”‚  2. Deploy Functions to staging                                â”‚  â”‚
â”‚  â”‚  3. Run database migrations (dry-run)                          â”‚  â”‚
â”‚  â”‚  4. Update configuration                                       â”‚  â”‚
â”‚  â”‚  5. Warm up services                                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                            â”‚
â”‚                         â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Automated Testing (Staging)                                   â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  1. Integration tests                                          â”‚  â”‚
â”‚  â”‚     â€¢ API endpoint tests                                       â”‚  â”‚
â”‚  â”‚     â€¢ Database connectivity                                    â”‚  â”‚
â”‚  â”‚     â€¢ AI service integration                                   â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  2. End-to-End tests                                           â”‚  â”‚
â”‚  â”‚     â€¢ Upload document flow                                     â”‚  â”‚
â”‚  â”‚     â€¢ OCR extraction                                           â”‚  â”‚
â”‚  â”‚     â€¢ Chat query flow                                          â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  3. Performance tests                                          â”‚  â”‚
â”‚  â”‚     â€¢ Load test (100 concurrent users)                         â”‚  â”‚
â”‚  â”‚     â€¢ Response time < 5s                                       â”‚  â”‚
â”‚  â”‚     â€¢ Memory usage acceptable                                  â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  4. Security tests                                             â”‚  â”‚
â”‚  â”‚     â€¢ OWASP ZAP scan                                           â”‚  â”‚
â”‚  â”‚     â€¢ SQL injection tests                                      â”‚  â”‚
â”‚  â”‚     â€¢ XSS vulnerability scan                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                            â”‚
â”‚                         â–¼                                            â”‚
â”‚                  âœ… All tests pass?                                   â”‚
â”‚                         â”‚                                            â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚           â”‚                           â”‚                              â”‚
â”‚           â–¼ YES                       â–¼ NO                           â”‚
â”‚     [Continue to Prod]          [Rollback & Alert]                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
MANUAL APPROVAL (Production Gate)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ Manual Approval Required                                          â”‚
â”‚                                                                       â”‚
â”‚  Approvers:                                                           â”‚
â”‚  â€¢ Tech Lead                                                          â”‚
â”‚  â€¢ DevOps Engineer                                                    â”‚
â”‚  â€¢ Product Manager (for major releases)                               â”‚
â”‚                                                                       â”‚
â”‚  Approval Checklist:                                                  â”‚
â”‚  â–¡ All tests passed                                                   â”‚
â”‚  â–¡ No critical bugs reported                                          â”‚
â”‚  â–¡ Database migration plan reviewed                                   â”‚
â”‚  â–¡ Rollback plan documented                                           â”‚
â”‚  â–¡ Monitoring dashboards ready                                        â”‚
â”‚  â–¡ On-call engineer notified                                          â”‚
â”‚                                                                       â”‚
â”‚  âœ… APPROVED â†’ Deploy to Production                                   â”‚
â”‚  âŒ REJECTED â†’ Cancel deployment                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
PRODUCTION DEPLOYMENT
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Blue-Green Deployment Strategy                                â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  Current State:                                                â”‚  â”‚
â”‚  â”‚  â€¢ BLUE environment: Production (v1.2.2) â† Users here          â”‚  â”‚
â”‚  â”‚  â€¢ GREEN environment: Staging (v1.2.3)                         â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  Deployment Steps:                                             â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚  â”‚
â”‚  â”‚  1. Promote GREEN to production slot                           â”‚  â”‚
â”‚  â”‚  2. Run smoke tests on GREEN                                   â”‚  â”‚
â”‚  â”‚  3. Gradually route traffic:                                   â”‚  â”‚
â”‚  â”‚     â€¢ 10% â†’ GREEN (canary)                                     â”‚  â”‚
â”‚  â”‚     â€¢ Monitor for 10 minutes                                   â”‚  â”‚
â”‚  â”‚     â€¢ If OK, increase to 50%                                   â”‚  â”‚
â”‚  â”‚     â€¢ Monitor for 10 minutes                                   â”‚  â”‚
â”‚  â”‚     â€¢ If OK, increase to 100%                                  â”‚  â”‚
â”‚  â”‚  4. Swap slots (GREEN becomes BLUE)                            â”‚  â”‚
â”‚  â”‚  5. Keep old BLUE as rollback option                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                            â”‚
â”‚                         â–¼                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Post-Deployment Monitoring                                    â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  Monitor for 1 hour:                                           â”‚  â”‚
â”‚  â”‚  â€¢ Error rate (should be < 1%)                                 â”‚  â”‚
â”‚  â”‚  â€¢ Response time (should be < 2s)                              â”‚  â”‚
â”‚  â”‚  â€¢ CPU/Memory usage                                            â”‚  â”‚
â”‚  â”‚  â€¢ AI service latency                                          â”‚  â”‚
â”‚  â”‚  â€¢ Database query performance                                  â”‚  â”‚
â”‚  â”‚  â€¢ User complaints/support tickets                             â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  âŒ Issues detected?                                            â”‚  â”‚
â”‚  â”‚     â†’ Auto-rollback to previous version                        â”‚  â”‚
â”‚  â”‚     â†’ Alert on-call engineer                                   â”‚  â”‚
â”‚  â”‚     â†’ Create incident                                          â”‚  â”‚
â”‚  â”‚                                                                 â”‚  â”‚
â”‚  â”‚  âœ… All metrics healthy?                                        â”‚  â”‚
â”‚  â”‚     â†’ Deployment successful                                    â”‚  â”‚
â”‚  â”‚     â†’ Update documentation                                     â”‚  â”‚
â”‚  â”‚     â†’ Notify team                                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ENVIRONMENTS SUMMARY
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                     â”‚
â”‚  ğŸ–¥ï¸  LOCAL (Developer Machine)                                      â”‚
â”‚     â€¢ Docker Compose for local services                            â”‚
â”‚     â€¢ Mocked AI services                                           â”‚
â”‚     â€¢ SQLite for database                                          â”‚
â”‚                                                                     â”‚
â”‚  ğŸ§ª DEV (Azure - Shared)                                            â”‚
â”‚     â€¢ Shared dev environment                                       â”‚
â”‚     â€¢ Auto-deploys from dev branch                                 â”‚
â”‚     â€¢ Basic Azure services (cheaper SKUs)                          â”‚
â”‚                                                                     â”‚
â”‚  ğŸš§ STAGING (Azure - Production-like)                               â”‚
â”‚     â€¢ Exact replica of production                                  â”‚
â”‚     â€¢ Full Azure stack                                             â”‚
â”‚     â€¢ Synthetic test data                                          â”‚
â”‚     â€¢ Auto-deploys after CI passes                                 â”‚
â”‚                                                                     â”‚
â”‚  ğŸš€ PRODUCTION (Azure - Live)                                       â”‚
â”‚     â€¢ Live user traffic                                            â”‚
â”‚     â€¢ Full Azure stack with HA                                     â”‚
â”‚     â€¢ Real data                                                    â”‚
â”‚     â€¢ Manual approval required                                     â”‚
â”‚     â€¢ Blue-green deployment                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Summary

### Architecture Characteristics

| Characteristic | Implementation | Notes |
|---------------|----------------|-------|
| **Scalability** | Auto-scaling, serverless, CDN | Handles 10x traffic spikes |
| **Availability** | Multi-instance, geo-redundancy | 99.9% SLA |
| **Security** | Defense in depth, zero trust | 8 security layers |
| **Performance** | Redis cache, CDN, AI Search | <2s response time |
| **Observability** | Full telemetry, dashboards | Real-time monitoring |
| **Cost** | Pay-per-use, auto-shutdown | $1000-1300/month |
| **Compliance** | DPDPA, GDPR-ready | Audit logs, encryption |
| **Maintainability** | Microservices, CI/CD | Easy updates, rollbacks |

### Technology Choices Rationale

| Service | Why Chosen | Alternative Considered |
|---------|------------|----------------------|
| Azure OpenAI | Enterprise-ready, GPT-4 access | OpenAI API, AWS Bedrock |
| Azure AI Search | Native vector search, RAG | Pinecone, Weaviate |
| Document Intelligence | Best OCR for complex docs | Google Vision, Tesseract |
| Cosmos DB | Low-latency globally | MongoDB Atlas, DynamoDB |
| Redis Cache | Industry standard, fast | Memcached |
| App Service | Managed, auto-scale | AKS, VMs |
| APIM | Enterprise API gateway | Kong, AWS API Gateway |

---

## Document Information

**Version:** 1.0  
**Last Updated:** October 15, 2025  
**Maintained By:** Medical Chatbot Team  
**Review Frequency:** Quarterly

**Related Documents:**
- Azure Services Setup Guide
- Azure Configuration Master Sheet
- Medical Chatbot PRD

---

**END OF ARCHITECTURE DOCUMENTATION**


